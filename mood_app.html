<!DOCTYPE html>
<html lang="ja">
<head>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <meta charset="UTF-8">
  <title>æ°—åˆ†è¨˜éŒ²ã‚¢ãƒ—ãƒª</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: "Arial", sans-serif;
      background-color: #b0c4de;
      padding: 20px;
      max-width: 600px;
      margin: auto;
    }
    h1 {
      color: #ff8c00;
      text-align: center;
    }
    label {
      font-weight: bold;
    }
    input, textarea, select, button {
      width: 100%;
      padding: 10px;
      margin-top: 8px;
      margin-bottom: 16px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    .message {
      background-color: #000080;
      padding: 12px;
      border-left: 6px solid #4a90e2;
      margin-top: 10px;
    }
    .entry {
      background-color: #fff;
      border: 1px solid #ddd;
      padding: 10px;
      margin-top: 10px;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <h1>ğŸŒ¿ æ°—åˆ†è¨˜éŒ²ã‚¢ãƒ—ãƒª</h1>

  <form id="moodForm">
    <label for="mood">ä»Šæ—¥ã®æ°—åˆ†ï¼š</label>
    <select id="mood" required>
      <option value="">é¸ã‚“ã§ãã ã•ã„</option>
      <option value="å…ƒæ°—">å…ƒæ°—</option>
      <option value="æ™®é€š">æ™®é€š</option>
      <option value="ã¤ã‚‰ã„">ã¤ã‚‰ã„</option>
    </select>

    <label for="note">ãƒ¡ãƒ¢ï¼ˆä»»æ„ï¼‰ï¼š</label>
    <textarea id="note" rows="3" placeholder="è‡ªç”±ã«æ›¸ã„ã¦OKã§ã™"></textarea>

    <button type="submit">è¨˜éŒ²ã™ã‚‹</button>
  </form>

  <div class="message" id="messageBox" style="display: none;"></div>

  <h2>ğŸ“ è¨˜éŒ²ä¸€è¦§</h2>
  <h2>ğŸ“Š æ°—åˆ†ã‚°ãƒ©ãƒ•</h2>
<canvas id="moodChart" width="400" height="200"></canvas>
  <div id="entryList"></div>

  <script>
  const ctx = document.getElementById('moodChart').getContext('2d');
let chart;

function updateChart(entries) {
  const moodMap = { 'å…ƒæ°—': 2, 'æ™®é€š': 1, 'ã¤ã‚‰ã„': 0 };
  const labels = entries.map(entry => entry.date);
  const data = entries.map(entry => moodMap[entry.mood]);

  if (chart) chart.destroy(); // å‰ã®ã‚°ãƒ©ãƒ•ã‚’å‰Šé™¤ã—ã¦æ›´æ–°

  chart = new Chart(ctx, {
    type: 'line', // 'bar' ã«ã™ã‚Œã°æ£’ã‚°ãƒ©ãƒ•ã«ã‚‚ã§ãã‚‹
    data: {
      labels: labels,
      datasets: [{
        label: 'æ°—åˆ†ã®æ¨ç§»',
        data: data,
        backgroundColor: 'rgba(74, 144, 226, 0.2)',
        borderColor: 'rgba(74, 144, 226, 1)',
        borderWidth: 2,
        tension: 0.3,
        pointRadius: 5
      }]
    },
    options: {
      scales: {
        y: {
          min: 0,
          max: 2,
          ticks: {
            callback: function(value) {
              return value === 2 ? 'å…ƒæ°—' : value === 1 ? 'æ™®é€š' : 'ã¤ã‚‰ã„';
            }
          }
        }
      }
    }
  });
}
    const form = document.getElementById('moodForm');
    const moodInput = document.getElementById('mood');
    const noteInput = document.getElementById('note');
    const messageBox = document.getElementById('messageBox');
    const entryList = document.getElementById('entryList');

    function getMessage(mood) {
      switch (mood) {
        case 'å…ƒæ°—':
          return "ãã®èª¿å­ï¼ä»Šæ—¥ã‚‚ç´ æ•µãª1æ—¥ã«ãªã‚Šã¾ã™ã‚ˆã†ã«ğŸŒ";
        case 'æ™®é€š':
          return "ç„¡ç†ã›ãšã‚†ã£ãã‚Šã§OKï¼ã‚ãªãŸã¯ãˆã‚‰ã„ğŸ˜Š";
        case 'ã¤ã‚‰ã„':
          return "ä¼‘ã‚“ã§ã„ã„ã‚“ã ã‚ˆã€‚ã‚ãªãŸã®æ°—æŒã¡ã¯å¤§åˆ‡ã§ã™ğŸŒ¿";
        default:
          return "";
      }
    }

    form.addEventListener('submit', function(e) {
      e.preventDefault();
      const mood = moodInput.value;
      const note = noteInput.value;
      const date = new Date().toLocaleDateString();
      const message = getMessage(mood);

      // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
      messageBox.textContent = message;
      messageBox.style.display = "block";

      // è¨˜éŒ²è¿½åŠ 
      const entry = document.createElement('div');
      entry.classList.add('entry');
      entry.innerHTML = `
        <strong>ğŸ“… ${date}</strong><br>
        æ°—åˆ†: ${mood}<br>
        ãƒ¡ãƒ¢: ${note ? note : "ãªã—"}<br>
        <em>${message}</em>
      `;
      entryList.prepend(entry);

      // ãƒ•ã‚©ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ
      form.reset();
    });
  </script>
</body>
				</html>